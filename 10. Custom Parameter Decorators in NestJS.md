# Кастомные декораторы для параметров в NestJS

## Введение

Кастомные декораторы для параметров в NestJS позволяют создавать удобные способы извлечения и обработки данных, передаваемых в методы контроллеров. Они помогают централизовать логику получения данных, что делает код более чистым и поддерживаемым.

## Что такое декораторы для параметров?

Декораторы для параметров используются для добавления дополнительной логики к параметрам методов контроллеров. Они позволяют легко извлекать данные из запросов, изменять их или выполнять валидацию.

## Преимущества кастомных декораторов для параметров

- **Централизация логики:** Логика обработки параметров может быть вынесена в отдельный декоратор, что уменьшает дублирование кода.
- **Чистота кода:** Упрощает методы контроллеров, делая их более читаемыми и поддерживаемыми.
- **Переиспользуемость:** Один и тот же декоратор можно использовать в разных методах и контроллерах.

## Как создать кастомный декоратор для параметра

### Пример: Декоратор для получения текущего пользователя

Рассмотрим пример создания декоратора, который извлекает текущего пользователя из запроса.

1. **Создание декоратора:**

```typescript
import { createParamDecorator, ExecutionContext } from "@nestjs/common";

export const CurrentUser = createParamDecorator(
  (data: unknown, ctx: ExecutionContext) => {
    const request = ctx.switchToHttp().getRequest();
    return request.user;
  }
);
```

В этом примере декоратор `CurrentUser` извлекает текущего пользователя из запроса и возвращает его.

2. Использование декоратора в контроллере:

```typescript
import { Controller, Get } from "@nestjs/common";
import { CurrentUser } from "./current-user.decorator";
// import {UserEntity} from '...';

@Controller("profile")
export class ProfileController {
  @Get()
  getProfile(@CurrentUser() user: UserEntity) {
    return user; // Возвращает информацию о текущем пользователе
  }
}
```

В этом примере метод `getProfile` использует декоратор `CurrentUser` для получения текущего пользователя и возвращает его.

## Заключение

Кастомные декораторы для параметров в NestJS — это мощный инструмент для упрощения кода и улучшения его поддерживаемости. Они позволяют централизовать логику извлечения и обработки данных из запросов, делая код вашего приложения более чистым и эффективным. Использование таких декораторов способствует созданию более организованного и масштабируемого кода.

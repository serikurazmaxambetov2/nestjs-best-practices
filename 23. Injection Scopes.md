## Injection Scope в NestJS

### Введение

В NestJS, **Injection Scope** определяет жизненный цикл зависимости, а также то, как и когда эта зависимость будет создана и разрушена. По умолчанию, зависимости в NestJS имеют **singleton** scope, что означает, что один и тот же экземпляр класса будет использоваться для всех запросов.

### Типы Injection Scope

#### 1. **Singleton Scope (По умолчанию)**

- **Описание**: В этом режиме один и тот же экземпляр зависимости используется в приложении на протяжении всего его жизненного цикла.
- **Применение**: Подходит для зависимостей, которые не содержат состояния или где требуется общий доступ к данным.

#### 2. **Request Scope**

- **Описание**: В этом режиме новый экземпляр зависимости создается для каждого запроса. Это полезно для зависимостей, которые содержат данные, специфичные для текущего запроса.
- **Применение**: Используется для зависимостей, которые должны быть уникальными для каждого запроса, например, сервисы, работающие с пользователями.

#### 3. **Transient Scope**

- **Описание**: В этом режиме новый экземпляр зависимости создается каждый раз при её инъекции.
- **Применение**: Подходит для легковесных, временных зависимостей, которые не должны сохраняться после использования.

### Пример использования

#### Singleton Scope

```typescript
@Injectable()
export class MyService {
  // Этот сервис будет использоваться как синглтон
}
```

#### Request Scope

```typescript
@Injectable({ scope: Scope.REQUEST })
export class MyService {
  // Этот сервис будет создавать новый экземпляр для каждого запроса
}
```

#### Transient Scope

```typescript
@Injectable({ scope: Scope.TRANSIENT })
export class MyService {
  // Этот сервис будет создавать новый экземпляр при каждом вызове
}
```

### Заключение

Понимание и правильное использование **Injection Scope** помогает оптимизировать использование ресурсов и управлять состоянием в приложении. Выбор подходящего scope зависит от задачи, которую нужно решить, и от характера зависимости.
